<link rel="import" href="../../polymer/polymer.html">

<link rel="import" href="../gamepad-behavior.html">

<script>
  Polymer({
    is: 'sample-gamepad',

    behaviors: [GamepadBehavior],

    properties: {
      buttons: {
        type: Object,
        notify: true
      }
    },

    _afterUpdate: function () {
      this.set('buttons', []);
      if (this.gamepad) {
        //to expose buttons to data binding as it seems the GamepadButton interface
        //isn't compatible with data binding for some reason
        let buttons = this.gamepad.buttons;
        for (let i = 0; i < buttons.length; i++){
            let button = {};
            button.pressed = buttons[i].pressed;
            button.value = buttons[i].value;
            this.push('buttons', button);
        }
      }
    }
  });
</script>
